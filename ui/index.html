<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title></title>
  <style type="text/css">
  body, #question, #answer {
      font-family: Futura;
      text-align: center;
      vertical-align: middle;
      margin: 0;
      padding: 0;
      width: 100%;

  }
  #question, #answer {
      font-size: 3em;
      background-color: #efefef;
      margin: 0 auto;
  }

  #answer {
     font-size: 2em;
     margin-top: 1em;
  }
  </style>
  <script type="text/javascript" src="./jquery.js"></script>
  <script type="text/javascript" src="./underscore.js"></script>
  <script type="text/javascript" src="../app/util.js"></script>
  <script type="text/javascript" src="../app/quizr.js"></script>
  <script type="text/javascript" src="../app/config.js"></script>
  <script type="text/javascript">

  const UNANSWERED = 1;
  const ANSWERED   = 2;

  class App {
    constructor($q, $a) {
      this.$q = $q;
      this.$a = $a;

      this.generateChoice();
    }

    generateChoice() {
      var choice = randomChoice();
      var qa = questionAndAnswerFor(choice.verb, choice.person, choice.tense);
      this.qa = qa;

      this.$q.html(this.qa.question);
      this.$a.html('');
      this.state = UNANSWERED;
    }

    answer() {
      this.$a.html(this.qa.answer);
      this.state = ANSWERED;
    }

    // keycode unused now - but better keyboard nav would be nice
    onKeyUp(keycode) {
      if (this.state === UNANSWERED) {
        this.answer();
        return;
      }
      this.generateChoice();
    }
  }

  $(() => {
      var app = new App($('#question'), $('#answer'));
      $('body').on('keyup',(e) => {
          app.onKeyUp(e.which);
          return true;
      });
  });
  </script>
</head>
<body>

<div id="question"></div>
<div id="answer"></div>

</body>
</html>